# Prisma Postgresキャッシング

## 主要なキャッシング概念
- Prisma Postgresは、データベース負荷を軽減しパフォーマンスを向上させるための組み込みクエリキャッシングを提供します
- キャッシングはPrisma Accelerateによって提供されます
- キャッシングはデフォルトでは有効になっていません

## キャッシュ戦略

### 1. Time-to-Live（TTL）
- キャッシュされたデータが新鮮な状態を保つ期間を決定します
- 秒単位で指定されます
- 例: `ttl: 60`は、キャッシュが60秒間有効であることを意味します

### 2. Stale-While-Revalidate（SWR）
- 新しいデータを取得中に古いキャッシュデータを提供できる期間を制御します
- バックグラウンドで更新中に古いデータを提供できます
- 例: `swr: 60`は、更新中に古いデータを60秒間提供できることを意味します

## ユースケース
- 商品カタログ（TTL）
- ユーザープロファイル（SWR）
- ニュース記事（TTL + SWRの組み合わせ）

## キャッシュの無効化
- 時間に敏感なデータの即時キャッシュ更新を可能にします
- 有料のPrismaプランが必要です
- キャッシュタグを使用して`$accelerate.invalidate` APIを使用します

## キャッシュ設定の例
```javascript
await prisma.user.findMany({
  cacheStrategy: {
    ttl: 30,
    swr: 60,
    tags: ["user_list"]
  }
});
```

このドキュメントは、予期しない動作を防ぐためにキャッシングを明示的にオプトインすることを強調しています。
