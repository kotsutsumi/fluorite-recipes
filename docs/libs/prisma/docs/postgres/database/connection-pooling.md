# Prisma Postgresコネクションプーリング

## コネクションプーリングの主要なポイント
- Prisma PostgresはPrisma Accelerateを通じて組み込みコネクションプーリングを提供します
- Prismaスキーマごとにデフォルトで最大10の同時データベース接続
- コネクションプール制限はサブスクリプションプランによって異なります:
  - Free/Starter: 10接続
  - Pro: 100接続
  - Business: 1000接続

## コネクションプールの設定

### 1. プールサイズ
- Prisma Postgresの場合、接続制限は10に固定されています
- 独自のデータベースの場合、Accelerateセットアップページで設定できます

### 2. プールタイムアウト
- デフォルトは10秒です
- データベース接続文字列で設定可能です
- 例: `postgresql://user:password@localhost:5432/db?connection_limit=10&pool_timeout=20`

## クエリとトランザクションの制限
- クエリタイムアウト: デフォルト10秒（プランによって異なります）
- インタラクティブトランザクションタイムアウト: デフォルト15秒
- レスポンスサイズ制限: デフォルト5MB

## オートスケーリング機能
- Accelerate + 独自のデータベースでのみ利用可能
- トラフィックに基づいてリソースを動的に割り当てます
- 複数のQuery Engineインスタンス間で接続を分散します
- 接続制限が10を超えると自動的に有効になります

## 推奨事項
- タイムアウト制限に近づくクエリを最適化します
- パフォーマンスを向上させるためにデータ取得を制限します
- コネクションプーリングを使用してアプリケーションのスケーラビリティを向上させます
