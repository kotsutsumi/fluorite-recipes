# イントロスペクション

## イントロスペクションとは

イントロスペクションは、Prisma CLIを使用してデータベースのスキーマを調査し、Prismaスキーマ内にデータモデルを生成するプロセスです。主に以下の目的で使用されます：

- 既存のプロジェクトにPrisma ORMを追加する際の初期データモデル生成
- SQL移行ツールを使用している場合のスキーマ変更の反映

## イントロスペクションの主な機能

データベースのスキーマを調査し、以下の要素をPrismaスキーマに変換します：

- データベースのテーブルをPrismaモデルにマッピング
- テーブルの列をモデルのフィールドにマッピング
- インデックスの変換
- データベース制約の属性への変換

## イントロスペクションのワークフロー

一般的なワークフローは以下の通りです：

1. データベーススキーマを変更（SQLなど）
2. `prisma db pull`を実行してPrismaスキーマを更新
3. `prisma generate`を実行してPrismaクライアントを更新
4. 更新されたPrismaクライアントをアプリケーションで使用

## コマンド例

```bash
# データベースからPrismaスキーマを生成
npx prisma db pull

# Prismaクライアントを生成
npx prisma generate
```

## 注意点と制限

- モデル、フィールド、列挙型の名前には特定の命名規則がある
- リレーションは外部キーに基づいて自動的に検出される
- 一部のデータベース機能は現時点でサポートされていない

## ベストプラクティス

- イントロスペクション後、手動でモデルやフィールドの名前を調整できます
- カスタマイズした内容は、次回のイントロスペクション時に保持されます
- `@@ignore`属性を使用して、特定のテーブルやフィールドを除外できます
