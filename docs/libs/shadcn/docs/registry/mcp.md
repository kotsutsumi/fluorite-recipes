# MCPサーバー

## はじめに

[shadcn MCP サーバー](/docs/mcp)は、任意の shadcn 互換レジストリですぐに動作します。レジストリをサポートするために特別な設定は必要ありません。

## 前提条件

MCPサーバーは、レジストリインデックスをリクエストすることで機能します。レジストリのルートに `registry` という名前のレジストリアイテムファイルがあることを確認してください。

例えば、レジストリが `https://acme.com/r/[name].json` でホストされている場合、`https://acme.com/r/registry.json` または `https://acme.com/r/registry` のファイルが必要です。

このファイルは、[レジストリスキーマ](/docs/registry/registry-json)に準拠した有効なJSONファイルである必要があります。

## MCPの設定

レジストリのユーザーに以下を設定するよう依頼してください：

### 1. レジストリの設定

`components.json` ファイルでレジストリを設定:

```json
{
  "registries": {
    "@acme": "https://acme.com/r/{name}.json"
  }
}
```

### 2. MCPの初期化

プロジェクトで以下のコマンドを実行:

```bash
pnpm dlx shadcn@latest mcp init --client claude
```

### 3. Claude Codeの使用

Claude Codeを再起動し、以下のようなプロンプトを試してみてください：

- アクメレジストリのコンポーネントを表示
- アクメレジストリのアイテムを使用してランディングページを作成

**注意:** `/mcp` コマンドを使用してMCPサーバーをデバッグできます。

## トラブルシューティング

### レジストリが見つからない

レジストリのルートに `registry.json` ファイルが存在することを確認してください。

### 認証エラー

プライベートレジストリの場合、適切な認証トークンが設定されていることを確認してください。

### キャッシュの問題

MCPサーバーはレジストリをキャッシュします。変更が反映されない場合は、キャッシュをクリアしてください。

## ベストプラクティス

1. レジストリスキーマに準拠する
2. 明確なドキュメントを提供する
3. 例とサンプルコードを含める
4. バージョン管理を適切に行う
5. 変更ログを維持する
