# アプリケーションの開発

モノレポでアプリケーションを開発することで、強力なワークフローが実現し、コードへの簡単なアクセスによってソース管理へのアトミックコミットが可能になります。

ほとんどの開発タスクは、コードの変更を監視する長時間実行されるタスクです。Turborepoは、強力なターミナルUIやその他の機能でこの体験を強化します：

- [`dev`タスクの設定](#configuring-development-tasks)
- [タスクとのインタラクション](#interacting-with-tasks)
- [Watchモード](#watch-mode)
- [セットアップスクリプトの実行](#running-setup-tasks-before-dev)
- [パッケージのサブセットを実行するためのタスクのフィルタリング](#running-a-specific-application)

## 開発タスクの設定

`turbo.json`で開発タスクを定義すると、Turborepoに長時間実行されるタスクを実行することを伝えます。これは、開発サーバーの実行、テストの実行、アプリケーションのビルドなどに役立ちます。

`dev`タスクを登録するには、2つのプロパティを持つ`turbo.json`に追加します：

```json title="./turbo.json"
{
  "tasks": {
    "dev": {
      "cache": false,
      "persistent": true
    }
  }
}
```

- **"cache": false**: Turborepoにタスクの結果をキャッシュしないように指示します。これは開発タスクなので、コードに頻繁に変更を加える可能性が高いため、結果をキャッシュすることは有用ではありません。
- **"persistent": true**: Turborepoにタスクを停止するまで実行し続けるように指示します。このキーは、ターミナルUIがタスクを長時間実行およびインタラクティブとして扱うための信号として機能します。さらに、終了しないタスクに誤って依存するのを防ぎます。

これで、`dev`タスクを実行して開発スクリプトを並列で開始できます：

```bash title="Terminal"
turbo dev
```

### `dev`の前にセットアップタスクを実行する

開発環境をセットアップしたり、パッケージを事前ビルドするスクリプトを実行したい場合もあります。`dependsOn`を使用して、`dev`タスクの前にこれらのタスクが実行されることを確認できます：

```json title="./turbo.json"
{
  "tasks": {
    "dev": {
      "cache": false,
      "persistent": true,
      "dependsOn": ["//#dev:setup"]
    },
    "//#dev:setup": {
      "outputs": [".codegen/**"]
    }
  }
}
```

このように、`//#dev:setup`タスクは`dev`タスクの前に実行され、その出力はキャッシュされます。

### 特定のアプリケーションの実行

`--filter`フラグを使用して、特定のアプリケーションとその依存関係のタスクを実行できます：

```bash
turbo dev --filter=web
```

これにより、`web`パッケージとその依存関係の`dev`タスクのみが実行されます。

## タスクとのインタラクション

ターミナルUIは、いくつかのインタラクティブ機能を提供します：

| キーバインド | アクション |
|---------|--------|
| `m` | キーバインドポップアップを切り替え |
| `↑`/`↓` | タスクを選択 |
| `p` | タスク選択を固定 |
| `i` | タスクインタラクションを開始 |

## Watchモード

`turbo watch`は、ソースコードが変更されたときにパッケージ全体でタスクをトリガーできる依存関係認識ウォッチャーを追加します。

## 制限事項

Turborepoは、開発タスクを終了するときにティアダウンスクリプトを実行できません。回避策として、別の`turbo dev:teardown`スクリプトを作成します。

## 次のステップ

開発プロセスの次のステップとして、Turborepoで環境変数を設定する方法を学ぶことをお勧めします。
