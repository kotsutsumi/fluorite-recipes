# 観測性

AI Gateway は、リクエストに関連する観測性メトリクスを記録し、モニタリングとデバッグに使用できます。

以下のメトリクスを表示できます：

- [Vercelダッシュボードの観測性タブ](#観測性タブ)
- [VercelダッシュボードのAIゲートウェイタブ](#aiゲートウェイタブ)

## 観測性タブ

Vercelダッシュボードの観測性概要ページの左側にあるAI Gatewayをクリックすると、これらのメトリクスにアクセスできます。

### チームスコープ

チームスコープのAI Gatewayセクションでは、チーム内のすべてのプロジェクトのAI Gatewayへのリクエストのメトリクスを表示できます。これは、AI Gatewayの全体的な使用状況とパフォーマンスを監視するのに役立ちます。

### プロジェクトスコープ

特定のプロジェクトのAI Gatewayセクションでは、そのプロジェクトのAI Gatewayへのすべてのリクエストのメトリクスを表示できます。

## AIゲートウェイタブ

チームスコープのVercelダッシュボードでAIゲートウェイタブをクリックすると、AIゲートウェイへの最近のリクエストの概要を「アクティビティ」セクションで確認できます。

## メトリクス

### モデル別リクエスト

「モデル別リクエスト」チャートは、各モデルへのリクエスト数を時系列で示します。これにより、最も頻繁に使用されているモデルと、使用パターンが時間とともにどのように変化するかを理解できます。

### プロバイダ別リクエスト

「プロバイダ別リクエスト」チャートは、各プロバイダへのリクエスト数を時系列で示します。これにより、AIリクエストがどのプロバイダに配分されているかを把握できます。

### レイテンシ

「レイテンシ」チャートは、AIゲートウェイを通じたリクエストの応答時間を示します。これにより、パフォーマンスのボトルネックを特定し、ユーザーエクスペリエンスを最適化できます。

### エラー率

「エラー率」チャートは、失敗したリクエストの割合を時系列で示します。これにより、信頼性の問題を特定し、必要に応じて対処できます。

### コスト

「コスト」チャートは、AIゲートウェイの使用に関連するコストを時系列で示します。これにより、支出を追跡し、予算を管理できます。

## アクティビティログ

アクティビティログには、AIゲートウェイへの個々のリクエストの詳細情報が表示されます。各エントリには、以下の情報が含まれます：

- **タイムスタンプ**: リクエストが行われた時刻
- **モデル**: 使用されたモデル
- **プロバイダ**: リクエストを処理したプロバイダ
- **ステータス**: リクエストが成功したか失敗したか
- **レイテンシ**: リクエストの応答時間
- **トークン**: 使用された入力および出力トークンの数
- **コスト**: リクエストのコスト

個々のリクエストをクリックすると、リクエストとレスポンスの詳細、エラーメッセージ（該当する場合）など、より詳細な情報が表示されます。

## ベストプラクティス

- **定期的な監視**: メトリクスを定期的に確認して、異常なパターンや潜在的な問題を早期に発見します
- **アラートの設定**: 重要なメトリクスにアラートを設定して、問題が発生したときに迅速に対応できるようにします
- **コストの最適化**: コストメトリクスを使用して、最も費用対効果の高いモデルとプロバイダを特定します
- **パフォーマンスの最適化**: レイテンシメトリクスを使用して、応答時間を改善する機会を見つけます

## 関連リンク

- [AIゲートウェイ入門](/docs/ai-gateway/getting-started)
- [モデルとプロバイダ](/docs/ai-gateway/models-and-providers)
- [料金](/docs/ai-gateway/pricing)
