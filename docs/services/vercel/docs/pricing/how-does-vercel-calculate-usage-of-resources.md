# リソース使用量の計算

Vercelでのリソース使用量と発生について理解することは、プロジェクトに最適な選択をするために重要です。このガイドは、Eコマースストアのユーザージャーニーを通じて、その仕組みを説明します。

## Vercelリソースの理解

このガイドで説明するシナリオとリソース使用量は、あくまで説明目的のものです。

使用量はユーザーがサイトを訪れるたびに発生します。Vercelのフレームワーク定義インフラストラクチャは、アプリケーションコードとフレームワークに基づいて、サイトのレンダリング方法とコストの発生方法を決定します。

典型的なEコマースストアのユーザージャーニーは、Vercelの[マネージドインフラストラクチャ](/docs/pricing#managed-infrastructure)で使用される複数のリソースに触れます。

このEコマースストアは、静的および動的コンテンツ配信を最適化するために、キャッシュ戦略の組み合わせを採用しています。静的ページには[Incremental Static Regeneration (ISR)](/docs/incremental-static-regeneration)を使用しています。

### 1. ユーザーがサイトに入る

ブラウザはVercelのCDNからページをリクエストします。静的でキャッシュされているため、[エッジリクエスト](/docs/manage-cdn-usage#edge-requests)と[高速データ転送](/docs/manage-cdn-usage#fast-data-transfer)のみが関係します。

課金対象リソース:
- エッジリクエスト: CDNへのネットワークリクエストごとに課金
- 高速データ転送: CDNから送信されたデータ量に基づいて課金

### 2. ユーザーが商品ページを閲覧

動的な商品ページは、サーバーサイドレンダリング（SSR）またはAPIルートを使用して生成される場合があります。この場合、以下のリソースが使用されます：

- 関数実行時間
- 関数呼び出し
- 高速オリジン転送

### 3. カート機能の使用

ユーザーがカートに商品を追加すると、APIルートが呼び出され、データベースとやり取りします：

- 関数実行時間
- 関数呼び出し
- データベースクエリ（外部サービス）

## リソース最適化のヒント

1. 静的コンテンツにはISRを使用
2. 適切なキャッシュ戦略を実装
3. 画像最適化を活用
4. 不要な関数呼び出しを削減
