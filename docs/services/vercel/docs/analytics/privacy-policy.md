# Web Analyticsのプライバシーとコンプライアンス

## 概要

Vercelはプライバシー重視のアプローチにコミットしており、コンプライアンス要件を満たすために、Web Analytics製品に関する透明性を提供することを目指しています。

## 主なプライバシー原則

### データ収集

- 異なるアプリケーションやWebサイト間でユーザーを追跡できる個人識別子は収集されない
- データ収集は匿名で集約される
- 統計目的のための最小限のデータのみを収集

### 訪問者の識別

- 訪問者は受信リクエストから作成されたハッシュによって識別される
- セッションの寿命は24時間に制限
- サードパーティCookieは使用されない

## 収集されるデータポイント

Vercelは以下の匿名化された情報を収集する可能性があります：

| データポイント | 例 |
|-------------|-----|
| イベントタイムスタンプ | `2023-10-29 09:06:30` |
| URL | `/blog/nextjs-10` |
| 動的パス | `/blog/[slug]` |
| リファラー | `https://google.com` |
| クエリパラメータ（フィルタリング済み） | `?page=2` |
| 地理的位置 | `US`（国レベル） |
| デバイスOS & バージョン | `Android 10` |
| ブラウザ & バージョン | `Chrome 86 (Blink)` |
| デバイスタイプ | `Mobile` |
| Web Analyticsスクリプトバージョン | `@vercel/analytics 0.1.0` |

## 設定オプション

顧客はWeb Analyticsを以下のように設定できます：

### 機密情報の追跡を防ぐ

`beforeSend`関数を渡すことでURLを変更できます：

```typescript
<Analytics
  beforeSend={(event) => {
    if (event.url.includes('/private')) {
      return null; // このイベントを無視
    }
    return event;
  }}
/>
```

### URLの変更

クエリパラメータや機密パスを削除：

```typescript
<Analytics
  beforeSend={(event) => {
    const url = new URL(event.url);
    url.searchParams.delete('secret');
    return {
      ...event,
      url: url.toString(),
    };
  }}
/>
```

### カスタムイベントからの個人データの編集

```typescript
track('Purchase', {
  amount: 99.99,
  // userId: '12345', // 除外
  // email: 'user@example.com', // 除外
});
```

## コンプライアンスアプローチ

### データ保護当局のガイダンスとの整合

Web Analyticsは以下を目指して設計されています：

- データ保護当局のガイダンスとの整合
- 集約された、識別不可能なデータへの焦点
- データ処理の透明性の提供

### 主なコンプライアンス機能

- **最小限のデータ収集**: 統計目的に必要なデータのみ
- **匿名化**: 個人識別子なし
- **集約**: 個別のユーザーセッションの再構築不可能
- **透明性**: 明確なデータ収集の開示

## GDPR準拠

### 法的根拠

- **正当な利益**: Web分析は正当なビジネス利益
- **最小限のデータ**: 個人データの収集を最小限に抑える
- **匿名性**: 訪問者を個人的に識別できない

### ユーザーの権利

- ユーザーにデータ収集について通知
- プライバシーポリシーを提供
- オプトアウトメカニズムを実装

## CCPA準拠

### 個人情報

- 収集されるデータは集約されており、個人を特定できない
- 個人情報の販売なし
- クロスサイトトラッキングなし

### ユーザーコントロール

- オプトアウト機能の提供
- データ削除リクエストの尊重
- 透明なデータ処理

## プライバシーのベストプラクティス

### 開発者向け

1. **機密データのフィルタリング**
   ```typescript
   <Analytics beforeSend={sanitizeEvent} />
   ```

2. **ユーザーにデータ収集を通知**
   - プライバシーポリシーの更新
   - 明確なコミュニケーション
   - Cookie/追跡バナー（必要に応じて）

3. **データ最小化**
   - 必要なデータのみを収集
   - カスタムイベントからPIIを除外
   - サンプルレートを使用

### エンドユーザー向け

- プライバシーポリシーを確認
- オプトアウトメカニズムを理解
- データ収集について認識

## 推奨アクション

開発者は以下を行うべきです：

1. データ収集設定を確認
2. 機密データ保護のために`beforeSend`関数を使用
3. 最小限で匿名化されたデータ収集の性質を理解
4. プライバシーポリシーを更新してWeb Analyticsの使用を反映
5. コンプライアンス要件を満たすために法務チームに相談

## データセキュリティ

### 転送中

- すべてのデータはHTTPSで暗号化
- ファーストパーティエンドポイント
- 安全な通信チャネル

### 保存時

- 集約されたメトリクス
- 個人識別子なし
- 限られたデータ保持

## 追加情報

包括的な詳細については、Vercelの[プライバシー通知](/legal/privacy-policy)を参照してください。

## 次のステップ

- [機密データの編集](/docs/analytics/redacting-sensitive-data)について学ぶ
- [パッケージ設定](/docs/analytics/package)を確認
- プライバシー設定を実装

## 関連リソース

- [Vercelプライバシーポリシー](/legal/privacy-policy)
- [Web Analytics概要](/docs/analytics)
- [データセキュリティ](/docs/security)
- [GDPR準拠](/legal/gdpr)
