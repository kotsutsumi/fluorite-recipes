# Web Analytics: 料金と制限

## 料金モデル

Web Analyticsの料金は、すべてのプロジェクト間で収集されたイベント数に基づいています。イベントには、ページビューとカスタムイベントが含まれます。

## プラン別の内訳

| プラン | 含まれるイベント | 追加イベント | 報告期間 | カスタムイベント | カスタムイベントプロパティ |
|------|----------------|------------|----------|--------------|----------------------|
| **Hobby** | 50,000 | - | 1ヶ月 | - | - |
| **Pro** | - | $3 / 100,000イベント | 12ヶ月 | 含まれる | 2 |
| **Pro with Web Analytics Plus** | - | $3 / 100,000イベント | 24ヶ月 | 含まれる | 8 |
| **Enterprise** | なし | カスタム | 24ヶ月 | 含まれる | 8 |

## 主な詳細

### イベントの共有

- イベントはVercelアカウントのすべてのプロジェクト間で共有される
- チーム全体の使用量を追跡

### Web Analytics Plus

- Proチームは月額$10のWeb Analytics Plusアドオンを購入可能
- 拡張された報告期間（24ヶ月）
- より多くのカスタムイベントプロパティ（8）

### Hobbyプランの猶予期間

- 制限に達する前に3日間の猶予期間
- 猶予期間後、イベント収集が停止

## 料金

### Proチーム

- **イベントあたり$0.00003**で課金
- 使用量を制御するためにSpend Managementを設定可能

### 課金の考慮事項

- プロジェクトが一時停止されるとアナリティクスデータの収集が停止
- 日割り計算が適用される

## イベントとは

「Vercel Web Analyticsのイベントは、自動的に追跡されるページビューまたはカスタムイベントのいずれかです。」

### イベントのカウント例

**ページビュー:**
```
ユーザーが/homeにアクセス = 1イベント
ユーザーが/aboutにナビゲート = 1イベント
合計 = 2イベント
```

**カスタムイベント:**
```typescript
track('Button Click');  // 1イベント
track('Form Submit');   // 1イベント
// 合計 = 2イベント
```

## 使用量通知

Vercelは、使用量制限に近づくと通知を送信し、チームがアナリティクス消費を管理するのを支援します。

## データ保持

### プラン別の報告期間

| プラン | 報告期間 |
|-------|----------|
| Hobby | 1ヶ月 |
| Pro | 12ヶ月 |
| Pro with Analytics Plus | 24ヶ月 |
| Enterprise | 24ヶ月 |

## 追加コスト

Web AnalyticsおよびSpeed Insightsスクリプトは、以下で追加コストが発生する可能性があります：

- **Data Transfer**: データ転送
- **Edge Requests**: エッジリクエスト

## コスト最適化戦略

### 1. イベントのフィルタリング

不要なイベントを除外：

```typescript
<Analytics
  beforeSend={(event) => {
    // 管理ページを除外
    if (event.url.includes('/admin')) {
      return null;
    }
    return event;
  }}
/>
```

### 2. カスタムイベントの最適化

最も重要なイベントのみを追跡：

```typescript
// ✅ 重要なイベントのみを追跡
track('Purchase Completed', { amount: 99.99 });

// ❌ すべてのクリックを追跡しない
// track('Any Button Click');
```

### 3. 環境別の追跡

本番環境でのみアナリティクスを有効化：

```typescript
{process.env.NODE_ENV === 'production' && <Analytics />}
```

## 使用量の管理

### Proチーム向けSpend Management

- 使用量しきい値を設定
- 予算制限を適用
- コストアラートを受信

### 使用量の監視

1. ダッシュボードで使用量を定期的に確認
2. イベント消費を追跡
3. トレンドを分析
4. 必要に応じて調整

## プランの比較

### Hobby vs Pro

**Hobby:**
- 月間50,000イベントまで無料
- 1ヶ月のデータ保持
- カスタムイベントなし
- 1プロジェクトに最適

**Pro:**
- 従量課金
- 12ヶ月のデータ保持
- カスタムイベント（2プロパティ）
- 無制限のプロジェクト

### Pro vs Pro with Analytics Plus

**Standard Pro:**
- 12ヶ月の保持
- 2カスタムイベントプロパティ

**Analytics Plus (+$10/月):**
- 24ヶ月の保持
- 8カスタムイベントプロパティ
- 拡張された分析機能

## Enterpriseプラン

Enterpriseプランではカスタム制限と料金があります。詳細については、カスタマーサクセスマネージャーにお問い合わせください。

## ベストプラクティス

### コスト管理

- 定期的に使用量を監視
- 不要なイベントをフィルタリング
- 予算しきい値を設定
- 最適化の機会を特定

### データ品質

- 重要なイベントに焦点を当てる
- カスタムイベントを賢く使用
- プロパティ制限内に収める

## 次のステップ

- [Spend Management](/docs/spend-management)を設定
- [使用量を最適化](/docs/manage-and-optimize-observability)
- [パッケージ設定](/docs/analytics/package)を確認

## 関連リソース

- [Web Analytics概要](/docs/analytics)
- [料金プラン](/docs/pricing)
- [可観測性の管理と最適化](/docs/manage-and-optimize-observability)
