# Vercel アクティビティログの使用方法

## 概要

アクティビティログは、Vercelのすべてのプランで利用可能な機能で、アカウントやチームで発生したイベントを時系列で表示します。

## 主な特徴

### 追跡される情報

- **ユーザー情報**: 誰がアクションを実行したか
- **イベントの種類**: どのような操作が行われたか
- **アカウントタイプ**: 個人アカウントまたはチームアカウント
- **イベント発生時間**: 正確なタイムスタンプ

## アクティビティログの使用目的

以下のような状況で役立ちます：

### セキュリティ監査

- 不審なアクティビティの検出
- アクセス権限の変更履歴の確認
- セキュリティインシデントの調査

### トラブルシューティング

- ユーザーの誤った削除の確認
- 設定変更の追跡
- 問題の根本原因分析

### コンプライアンス

- 監査証跡の提供
- 変更履歴の文書化
- コンプライアンス要件の遵守

## イベントの種類

ログには非常に多岐にわたるイベントが記録されます。主な例：

### プロジェクト関連

- **project.created**: プロジェクトの作成
- **project.deleted**: プロジェクトの削除
- **project.updated**: プロジェクト設定の更新
- **project.transferred**: プロジェクトの譲渡

### デプロイメント関連

- **deployment.created**: デプロイメントの開始
- **deployment.ready**: デプロイメントの完了
- **deployment.failed**: デプロイメントの失敗
- **deployment.canceled**: デプロイメントのキャンセル
- **deployment.promoted**: デプロイメントの本番昇格

### チーム管理

- **team-member.added**: チームメンバーの追加
- **team-member.removed**: チームメンバーの削除
- **team-member.role-changed**: メンバーの役割変更
- **team.created**: チームの作成
- **team.deleted**: チームの削除

### ドメイン関連

- **domain.added**: ドメインの追加
- **domain.removed**: ドメインの削除
- **domain.verified**: ドメインの検証
- **domain.moved**: ドメインの移動
- **dns-record.created**: DNSレコードの作成
- **dns-record.updated**: DNSレコードの更新

### 統合

- **integration.installed**: 統合のインストール
- **integration.uninstalled**: 統合の削除
- **integration.configured**: 統合の設定変更

### セキュリティ設定

- **password-protection.enabled**: パスワード保護の有効化
- **password-protection.disabled**: パスワード保護の無効化
- **trusted-ips.added**: 信頼できるIPの追加
- **trusted-ips.removed**: 信頼できるIPの削除
- **deployment-protection.updated**: デプロイメント保護の更新

### 環境変数

- **env.created**: 環境変数の作成
- **env.updated**: 環境変数の更新
- **env.deleted**: 環境変数の削除

### 認証・セキュリティ

- **2fa.enabled**: 2要素認証の有効化
- **2fa.disabled**: 2要素認証の無効化
- **saml.configured**: SAML SSOの設定
- **token.created**: アクセストークンの作成
- **token.revoked**: アクセストークンの削除

## アクティビティログの確認方法

### アカウントのアクティビティログ

1. [Vercelダッシュボード](https://vercel.com/dashboard)にログイン
2. 左側のサイドバーで「アクティビティ」を選択
3. タイムラインでイベントを確認

### チームのアクティビティログ

1. チームを選択
2. 「設定」タブに移動
3. 「アクティビティログ」セクションを選択
4. タイムラインでイベントを確認

## フィルタリングとソート

### イベントのフィルタリング

アクティビティログでは、以下の条件でフィルタリングできます：

- **イベントの種類**: 特定のイベントタイプのみ表示
- **ユーザー**: 特定のユーザーのアクションのみ表示
- **日付範囲**: 特定期間のイベントのみ表示
- **プロジェクト**: 特定プロジェクトに関連するイベントのみ表示

### ソートオプション

- **新しい順**: 最新のイベントから表示（デフォルト）
- **古い順**: 最も古いイベントから表示

## イベントの詳細

各イベントには以下の情報が含まれます：

### 基本情報

- **イベントタイプ**: アクションの種類
- **実行者**: アクションを実行したユーザー
- **タイムスタンプ**: イベントが発生した正確な日時
- **IPアドレス**: アクションが実行されたIPアドレス（該当する場合）

### コンテキスト情報

- **プロジェクト名**: 影響を受けたプロジェクト
- **リソース**: 影響を受けたリソース（ドメイン、環境変数など）
- **変更内容**: 何が変更されたか

## エクスポート機能

### CSVエクスポート

アクティビティログをCSV形式でエクスポートできます：

1. アクティビティログページに移動
2. 「エクスポート」ボタンをクリック
3. 日付範囲を選択
4. CSVファイルをダウンロード

**用途：**
- 外部ツールでの分析
- 長期的な監査記録の保管
- レポート作成

## 重要な注意点

### プライバシーとセキュリティ

- サードパーティサービスへのログ送信は行いません
- アカウント所有者とチームメンバーのみが閲覧可能
- 機密情報（パスワード、トークン）は記録されません

### 保持期間

- **Hobbyプラン**: 30日間
- **Proプラン**: 90日間
- **Enterpriseプラン**: カスタマイズ可能（最大1年間）

### 制限事項

- リアルタイムではなく、若干の遅延がある場合があります
- すべてのAPIアクションが記録されるわけではありません
- 一部の内部システムイベントは含まれません

## ベストプラクティス

### 定期的な確認

- 週次または月次でアクティビティログを確認
- 不審なアクティビティを早期に検出
- チームメンバーの変更を追跡

### セキュリティインシデント対応

1. 不審なイベントを特定
2. 関連するすべてのイベントを確認
3. 影響範囲を評価
4. 必要に応じて是正措置を実施

### コンプライアンス

- 重要な変更を定期的にエクスポート
- 外部監査用の記録として保管
- 内部ポリシーとの整合性を確認

## ユースケース例

### 例1: プロジェクトが削除された場合

1. アクティビティログで`project.deleted`イベントを検索
2. 削除を実行したユーザーを特定
3. 削除時刻と関連情報を確認
4. 必要に応じて復元または再作成

### 例2: 環境変数の変更追跡

1. `env.updated`イベントをフィルタリング
2. 変更履歴を時系列で確認
3. 変更内容と実行者を特定
4. 問題の原因を特定

### 例3: チームメンバーの追加確認

1. `team-member.added`イベントを検索
2. 新しいメンバーと招待者を確認
3. 付与された役割を確認
4. セキュリティポリシーとの整合性を確認

## 統合とAPI

### REST API

アクティビティログは、REST APIを通じてプログラマティックにアクセスできます：

```bash
curl -H "Authorization: Bearer YOUR_TOKEN" \
  "https://api.vercel.com/v1/events?teamId=YOUR_TEAM_ID"
```

### Webhooks

重要なイベントについて、Webhooksを設定してリアルタイム通知を受け取ることができます。

## 補足

アクティビティログは、アカウント内の変更を追跡し、透明性と監査性を提供する重要なツールです。セキュリティ、コンプライアンス、トラブルシューティングにおいて、不可欠な機能となっています。

## 関連リソース

- [セキュリティベストプラクティス](/docs/security)
- [チーム管理](/docs/teams)
- [監査ログAPI](/docs/api/audit-logs)
- [Webhooks](/docs/webhooks)
