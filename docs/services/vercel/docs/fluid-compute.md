# Fluid Compute

## 概要

Fluid computeは、サーバーレスアーキテクチャの柔軟性と強化された機能を組み合わせたハイブリッドソリューションを提供するサーバーレス実行モデルです。主な機能には以下が含まれます:

- すぐに使える設定不要の環境
- 最適化された同時実行性
- 動的なスケーリング
- バックグラウンド処理
- 自動的なコールドスタート最適化
- クロスリージョンおよびアベイラビリティゾーンのフェイルオーバー
- エラーの分離

## Fluid Computeの有効化

2025年4月23日以降、Fluid computeは新規プロジェクトでデフォルトで有効になっています。

### プロジェクト全体で有効化

ダッシュボードから有効化する手順:

1. プロジェクトのFunctions Settingsに移動
2. Fluid Computeセクションを見つける
3. トグルスイッチで有効化
4. Saveをクリック
5. プロジェクトをデプロイ

### 特定の環境で有効化

`vercel.json`を使用して設定:

```json
{
  "$schema": "https://openapi.vercel.sh/vercel.json",
  "fluid": true
}
```

## 利用可能なランタイムサポート

サポートされているランタイム:

- Node.js
- Python
- Edge

## 最適化された同時実行性

Fluid computeでは、複数の呼び出しが単一の関数インスタンスを共有できるため、特に以下のケースで有益です:

- AIアプリケーション
- I/Oバウンドなタスク
- コールドスタートの削減
- レイテンシの最小化
- コンピューティングコストの削減

## バイトコードキャッシング

Node.js バージョン20以降の場合:

- 最初の実行後にコンパイルされたバイトコードを保存
- 後続のコールドスタート時の再コンパイルを排除
- 本番環境でのみ適用
- CommonJS依存関係で動作

## 分離境界

- 複数の呼び出し間で物理インスタンスを共有
- プロセス全体をクラッシュさせることなく、キャッチされない例外を処理
- リクエストの信頼性を維持

## プランごとのデフォルト設定

| 設定 | Hobby | Pro | Enterprise |
|----------|-------|-----|------------|
| CPU | Standard | Standard/Performance | Standard/Performance |
| 最大継続時間 | 300秒 | 300秒/800秒 | 300秒/800秒 |
| マルチリージョンFunctions | 最大3個 | すべて | すべて |

## 設定の優先順位

1. 関数コード
2. `vercel.json`
3. ダッシュボード設定
4. Fluidのデフォルト

## 料金と使用量

詳細については、Fluid computeの料金ドキュメントを参照してください。
