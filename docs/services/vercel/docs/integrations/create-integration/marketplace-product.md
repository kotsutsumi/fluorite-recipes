# ネイティブ統合の作成

ネイティブ統合により、Vercelの顧客は別のアカウントを作成することなく、ダッシュボード内で直接統合の特定の機能を利用できます。

## 要件

ネイティブ統合のプロバイダとして製品をリストするには、以下が必要です：

- [Proプラン](/docs/plans/pro-plan)のVercelチーム
- 以下に基づくネイティブ統合サーバーのベースURL：
  - [サンプル統合サーバーリポジトリ](https://github.com/vercel/example-marketplace-integration)
  - [ネイティブ統合APIエンドポイント](/docs/integrations/marketplace-api)
- Vercelマーケットプレイスで製品を利用可能にするための承認済みプロバイダステータス。[マーケットプレイスプログラムに応募](https://vercel.com/marketplace-providers#become-a-provider)

## 製品の作成

このチュートリアルでは、以下の手順でストレージ製品のネイティブ統合を作成します：

### 1. 統合の設定

製品を作成する前に、既存の統合が必要です。[新しいネイティブ統合の作成](/docs/integrations/create-integration)または既存の統合を使用します。

### 2. 統合サーバーのデプロイ

統合サーバーをデプロイするには、統合設定を更新してベースURLを統合サーバーのURLに設定します：

1. スコープセレクターからチームを選択
2. ダッシュボードから「統合」タブを選択し、「統合コンソール」ボタンをクリック
3. 統合を選択し、「設定」タブに移動
4. 「マーケットプレイス設定」セクションで、「ベースURL」フィールドに統合サーバーのURLを入力
5. 変更を保存

### 3. 製品の定義

統合コンソールで製品を定義します：

1. 統合の「製品」タブに移動
2. 「製品を追加」ボタンをクリック
3. 製品の詳細を入力：
   - **製品名**: わかりやすい製品名
   - **製品タイプ**: ストレージ、モニタリング、セキュリティなど
   - **説明**: 製品の簡潔な説明
   - **アイコン**: 製品のアイコン画像

### 4. 価格プランの設定

各製品には、1つ以上の価格プランを設定できます：

1. 製品の詳細ページで、「価格プラン」セクションに移動
2. 「プランを追加」ボタンをクリック
3. プランの詳細を入力：
   - **プラン名**: Free、Pro、Enterpriseなど
   - **価格**: 月額料金または使用量ベースの価格
   - **機能**: このプランに含まれる機能のリスト
   - **制限**: ストレージ容量、APIリクエスト数などの制限

### 5. リソースプロビジョニングの実装

統合サーバーで、以下のエンドポイントを実装します：

- **リソース作成**: ユーザーが製品を購読したときに呼び出される
- **リソース削除**: ユーザーがリソースを削除したときに呼び出される
- **リソース情報取得**: リソースの詳細を取得するために呼び出される

### 6. 環境変数の設定

リソースがプロビジョニングされたら、プロジェクトに必要な環境変数を自動的に追加します：

```typescript
{
  "environmentVariables": [
    {
      "key": "DATABASE_URL",
      "value": "postgresql://user:password@host:port/database",
      "target": ["production", "preview", "development"]
    }
  ]
}
```

### 7. テストと検証

1. テストアカウントで統合をインストール
2. 製品を購読してリソースを作成
3. 環境変数が正しく設定されていることを確認
4. リソースが期待通りに動作することを確認
5. リソースの削除をテスト

### 8. マーケットプレイスへの申請

製品が準備できたら、[マーケットプレイスへの申請](/docs/integrations/create-integration/submit-integration)を行います。

## ベストプラクティス

- **明確な価格設定**: 各プランの価格と含まれる機能を明確に示す
- **スムーズなオンボーディング**: リソースのプロビジョニングを迅速かつ確実に行う
- **適切なエラーハンドリング**: わかりやすいエラーメッセージを提供
- **包括的なドキュメント**: 統合の使用方法に関する詳細なドキュメントを提供
- **レスポンシブサポート**: ユーザーの問い合わせに迅速に対応
