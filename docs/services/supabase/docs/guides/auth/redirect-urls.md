# リダイレクトURL

## 概要

Supabase Auth により、アプリケーションは制御されたアクセスでWebページまたはモバイルアプリでユーザーセッションを受け取ることができます。パスワードレスサインインまたはサードパーティプロバイダーを使用する場合、Supabase クライアントライブラリは認証後のリダイレクト先を指定するための `redirectTo` パラメータを提供します。

主なポイント：

- デフォルトでは、ユーザーは `SITE_URL` にリダイレクトされます
- `SITE_URL` を変更するか、追加のリダイレクトURLを追加できます
- Web3 サインインの場合、メッセージは許可されたURLに対して検証されます

## リダイレクトURLの設定

許可リストを編集するには：

- ダッシュボードのURL設定ページに移動
- ローカル/セルフホストプロジェクトの場合は、設定ファイルを使用

## ワイルドカードサポート

Supabase はリダイレクトURLでワイルドカードをサポートしており、Netlify や Vercel などのプラットフォームのプレビューURLマッチングを可能にします。

ワイルドカードパターン：

| ワイルドカード | 説明 |
|----------|-------------|
| `*` | 非セパレータ文字にマッチ |
| `**` | 任意の文字シーケンスにマッチ |
| `?` | 単一の非セパレータ文字にマッチ |
| `c` | 特定の文字にマッチ |
| `\c` | 文字にマッチ |
| `[!{ character-range }]` | 範囲外の文字にマッチ |

### ワイルドカードURLの例

- `http://localhost:3000/*`: `/foo` にマッチ、`/foo/bar` にはマッチしない
- `http://localhost:3000/**`: `/foo`、`/bar`、`/foo/bar` にマッチ

## プラットフォーム固有の設定

### Netlify プレビューURL

```
SITE_URL: 公式サイトURL
追加URL:
- http://localhost:3000/**
- https://**--my_org.netlify.app/**
```

### Vercel プレビューURL

```
SITE_URL: 公式サイトURL
追加URL:
- http://localhost:3000/**
- https://*-<team-slug>.vercel.app/**
```

## モバイルディープリンク

次のようなURIを使用：

- `com.supabase://login-callback/`
- `com.supabase.staging://login-callback/`

## エラーハンドリング

認証エラーが発生した場合、Supabase は設定されたリダイレクトURLにエラーパラメータを追加します。
