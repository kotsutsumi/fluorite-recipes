# Functionsでのルーティング処理

## 概要

このドキュメントでは、Edge Functions内でカスタムルーティングを処理する方法を説明します。重要なポイントは以下の通りです:

- 通常、Edge Functionsは単一のアクションを実行するように記述されます
- 複数の独立した関数は、リクエストパフォーマンスの低下につながる可能性があります
- 各関数は起動時に「コールドスタート」を経験します

### ルーティングのパフォーマンス上の利点

複数のアクションを1つのEdge Functionに結合することで、以下が可能になります:

- 複数のアクションを1つの関数に結合することでコールドスタートを削減
- 単一の関数で完全なREST APIを構築
- 複数のエンドポイントに対して1つのインスタンスをウォーム状態に保つことでパフォーマンスを向上

## ルーティングアプローチ

ドキュメントでは、ルーティングに対する3つの主要なアプローチを提供しています:

### 1. Webアプリケーションフレームワーク

- 推奨フレームワーク: Express、Oak、Hono
- 1つの関数内で複数のエンドポイントを結合可能

### 2. 基本的なルーティング例

- さまざまなWebフレームワークを使用したルーティングを示します
- **重要**: パスは常に関数名で始まる必要があります

### 3. URL Patterns API

- フレームワークを使用しない直接的なルーティング実装
- 少数のルートを持つ小規模なアプリに適しています

## コード例（Honoフレームワーク）

```typescript
import { Hono } from 'jsr:@hono/hono'
const app = new Hono()

app.post('/hello-world', async (c) => {
  const { name } = await c.req.json()
  return new Response(`Hello ${name}!`)
})

app.get('/hello-world', (c) => {
  return new Response('Hello World!')
})

Deno.serve(app.fetch)
```

Deno、Express、Oakなどの他のフレームワークについても同様の例が提供されています。

## ルートパラメータ

URLセグメント内で値をキャプチャするために、`/tasks/:taskId/notes/:noteId`のようなルートパラメータを使用できます。

**重要な注意事項**:
- パスは関数名で始まる必要があります
- ルートパラメータは関数名プレフィックスの後にのみ使用できます
