# PostgreSQLでの全文検索

## 概要

Postgresには、「全文検索」クエリを処理する組み込み関数があります。これは、Postgres内の「検索エンジン」のようなものです。

## 主な関数

### `to_tsvector()`

- データを検索可能なトークンに変換します
- 「to text search vector」の略
- 例: テキストを検索可能なトークンに変換

### `to_tsquery()`

- クエリ文字列をマッチング用のトークンに変換します
- キーワードの「あいまい一致」を可能にします
- 単語のバリエーションを検索できます

### マッチ演算子 `@@`

- `to_tsvector`と`to_tsquery`の結果間の一致を返します

## 検索手法

### 基本的な全文クエリ

#### 1. 単一列の検索
- 特定の単語を含むレコードを検索
- 例: 説明文で「big」を検索

#### 2. 複数列の検索
- 複数の列を組み合わせて検索
- データベースで計算列を使用できます

#### 3. 検索語の一致
- `&`記号: すべての単語に一致
- `|`記号: いずれかの単語に一致

### 部分検索

- `to_tsquery()`で`:*`構文を使用
- 特定のプレフィックスで始まる単語を検索
- APIアクセス可能性のためにストアドプロシージャを作成できます

## インデックスの作成

- 検索可能なインデックス列を生成
- 生成列を使用してインデックスを最新の状態に保つ
- 検索パフォーマンスを向上させます

## 高度なクエリ演算子

- 近接検索
- 検索での否定
- 柔軟なテキストマッチング機能

## リソース

- さらなる詳細についてはPostgreSQLテキスト検索ドキュメントを推奨します

このドキュメントは、PostgreSQLで全文検索機能を実装するための包括的なガイドを提供し、複数のプログラミング言語での例を示しています。
