# カスタムネイティブコードの追加

カスタムネイティブコードは、以下のいずれかまたは両方のアプローチで追加できます：

- ネイティブコードを含むライブラリの使用
- ネイティブコードの記述

## ネイティブコードを含むライブラリの使用

ExpoとReact Native開発者は、通常以下のようなライブラリを使用します：

- `expo-camera`
- `react-native-safe-area-context`
- `react-native`

これらのライブラリにより、開発者はJavaScriptコードからデバイス機能にアクセスできます。

### 開発ビルドでカスタムネイティブコードを含むライブラリをインストールする

手順：

1. **npmでライブラリをインストール**
   ```bash
   npx expo install react-native-localize
   ```

2. **アプリ設定で設定プラグインを構成**

3. **新しい開発ビルドを作成**

## ネイティブコードの記述

[Expo Modules API](/modules/overview)を使用して、SwiftとKotlinコードを記述し、アプリに新しい機能を追加できます。

### ネイティブコードの記述を検討すべき場合

以下の場合、ネイティブコードの記述を検討してください：

- ライブラリが特定のプラットフォーム機能を提供していない
- サードパーティサービスにReact Nativeバインディングがない

### ローカルモジュールの作成

単一のアプリの場合、ローカルExpoモジュールを作成します：

```bash
npx create-expo-module@latest --local
npx expo run
```

### 複数のアプリでモジュールを共有

`--local`フラグなしで`npx create-expo-module@latest`を使用して、スタンドアロンモジュールを作成します。

```bash
npx create-expo-module@latest
```

## Continuous Native Generation（CNG）の考慮事項

CNGを使用する場合、以下の点に注意してください：

### ローカルビルド

デバッグを改善するために、ローカルでビルドします。

### 設定プラグイン

プロジェクト設定には設定プラグインを使用します。

### イベントサブスクライバー

アプリライフサイクルフックにはイベントサブスクライバーを使用します。

## まとめ

このドキュメントは、Expoプロジェクトでカスタムネイティブコードを追加および管理するための包括的なガイダンスを提供します。ライブラリの使用からネイティブコードの直接記述まで、さまざまなアプローチをサポートしています。
