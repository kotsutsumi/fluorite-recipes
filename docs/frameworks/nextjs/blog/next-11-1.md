# Next.js 11.1

**投稿日**: 2021年8月11日（水曜日）

**著者**: DongYoon Kang、Jiachi Liu、JJ Kasper、Maia Teegarden、Shu Ding、Steven、Tim Neutkens、Tobias Koppers

Next.js 11.1では、スタック全体のビルドパフォーマンスを改善しています：

## 主な機能

- **セキュリティパッチ**：オープンリダイレクトを防ぐための重要な更新
- **ESモジュールサポート**：実験的フラグで有効化
- **Rustベースのツール**：JSツール（BabelとTerser）を置き換えるSWC統合
- **より高速なデータフェッチ**：プリレンダリング時にHTTP `keep-alive`で2倍高速化
- **より高速なソースマップ**：ソースマップ使用時に70%高速なビルドと67%少ないメモリ使用量
- **ESLint統合の改善**：よりアクセスしやすいデフォルトとタイポのリント
- **`next/image`の改善**：Sharpのオプション使用、`next export`のより良いサポート

## セキュリティパッチ

チームはセキュリティ研究者と協力して脆弱性を防いでいます。`pages/_error.js`に潜在的なオープンリダイレクトの問題が発見され、フィッシング攻撃を可能にする可能性がありました。

## ESモジュールサポート

Next.js 11.1では、ESモジュールの実験的サポートが導入され、`"type": "module"`を持つnpmパッケージのインポートが可能になりました。

設定例：

```javascript
module.exports = {
  // CommonJSよりもESモジュールの読み込みを優先
  experimental: { esmExternals: true },
};
```

## RustベースのSWCの採用

BabelとTerserを置き換えるためにSWCを統合し、大幅なパフォーマンス改善を実現：
- コード変換が約500msから約10msに短縮
- コードミニフィケーションが約250msから約30msに短縮

## パフォーマンスの改善

- ビルド中のHTTPリクエストが2倍高速化
- HTTP Keep-Aliveをデフォルトで有効化
- ソースマップ生成が70%高速化、メモリ使用量が67%削減

## ESLintの改善

- デフォルトのアクセシビリティルールを追加
- データフェッチメソッドの一般的なタイポのリント

## まとめ

Next.js 11.1は、セキュリティ、パフォーマンス、開発者体験の重要な改善を提供します。
