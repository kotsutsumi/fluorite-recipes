# Next.js 12

**投稿日**: 2021年10月26日（火曜日）

**著者**:
- Connor Davis ([@connordav_is](https://twitter.com/connordav_is))
- DongYoon Kang ([@kdy1dev](https://twitter.com/kdy1dev))
- Gerald Monaco ([@devknoll](https://twitter.com/devknoll))
- その他多数

## 主なハイライト

Next.js 12では、いくつかの主要な改善が導入されました：

### Rustコンパイラー

- Fast Refreshが約3倍高速化
- ビルドが約5倍高速化

### ミドルウェア（ベータ）

設定よりもコードによる完全な柔軟性

### React 18サポート

ネイティブAPIとSuspenseサポート

### 画像AVIFサポート

オプトインで20%小さい画像

### ボット対応ISRフォールバック

Webクローラー用に最適化されたSEO

### ネイティブESモジュールサポート

標準化されたモジュールシステムとの整合性

### URLインポート（アルファ）

任意のURLからパッケージをインポート

### Reactサーバーコンポーネント（アルファ）

ゼロクライアント側JavaScriptでサーバーサイドレンダリング

## 詳細セクション

### Rustコンパイラー

SWCの上に構築された新しいRustコンパイラーは、大幅なパフォーマンス改善を提供：
- Babelより17倍高速
- 既存のBabel設定と下位互換性あり
- `styled-jsx`変換用の全く新しいCSSパーサー

### ミドルウェア

リクエスト完了前にコードを実行でき、以下のユースケースがあります：
- 認証
- ボット保護
- リダイレクト
- リライト
- 機能フラグ
- A/Bテスト
- 高度なルーティング

### React 18サポート

以下の実験的機能を導入：
- サーバーサイドストリーミング
- Suspenseサポート
- サーバー上ですべてをレンダリングできるサーバーコンポーネント

### ESモジュールとURLインポート

- ESモジュールを優先
- URLを介してパッケージを直接インポート可能
- リモートリソースを追跡する`next.lock`ファイルを生成

### その他の改善

- AVIF画像フォーマットサポート
- ボット対応ISRフォールバック
- パフォーマンストラッキングの強化
- Webpack最適化

**更新コマンド**: `npm i next@latest`
