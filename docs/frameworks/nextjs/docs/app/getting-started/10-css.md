# CSS

Next.jsは、アプリケーションをスタイリングするための複数の方法をサポートしています：

- **Tailwind CSS**: ユーティリティファーストのCSSフレームワーク
- **CSS Modules**: ローカルスコープのCSSを作成するための規約
- **Global CSS**: 従来のCSSですが、組み込みツールによる強化された機能
- **外部スタイルシート**: npmパッケージからスタイルシートをインポート

このページでは、Next.jsアプリケーションをスタイリングするための各方法について学びます。

## Tailwind CSS

[Tailwind CSS](https://tailwindcss.com)は、ユーティリティクラスを使用してスタイルを適用できる、ユーティリティファーストのCSSフレームワークです。

### インストール

Tailwind CSSをインストールし、PostCSSプラグインとして設定します：

\`\`\`bash
npm install tailwindcss
\`\`\`

次に、\`postcss.config.mjs\`ファイルでTailwindのPostCSSプラグインを追加します：

\`\`\`js title="postcss.config.mjs"
/** @type {import('postcss-load-config').Config} */
const config = {
  plugins: {
    '@tailwindcss/postcss': {},
  },
}

export default config
\`\`\`

最後に、[\`@import\`](https://developer.mozilla.org/docs/Web/CSS/@import)ディレクティブを使用して、グローバルCSSファイルにTailwind CSSをインポートします：

\`\`\`css title="app/globals.css"
@import 'tailwindcss';
\`\`\`

[ルートレイアウト](/docs/app/building-your-application/routing/layouts-and-pages#root-layout-required)（\`app/layout.tsx\`）でグローバルスタイルシートをインポートして、アプリケーション内のすべてのルートに適用します。

\`\`\`tsx title="app/layout.tsx"
import type { Metadata } from 'next'
import './globals.css'

export const metadata: Metadata = {
  title: 'Create Next App',
  description: 'Generated by create next app',
}

export default function RootLayout({
  children,
}: Readonly<{
  children: React.ReactNode
}>) {
  return (
    <html lang="en">
      <body>{children}</body>
    </html>
  )
}
\`\`\`

### クラスの使用

Tailwind CSSをインストールした後、アプリケーションでTailwindユーティリティクラスを使用できます：

\`\`\`tsx title="app/page.tsx"
export default function Page() {
  return (
    <main className="flex min-h-screen flex-col items-center justify-between p-24">
      <h1 className="text-4xl font-bold">Welcome to Next.js!</h1>
    </main>
  )
}
\`\`\`

## CSS Modules

Next.jsには、\`.module.css\`拡張子を使用したCSS Modulesの組み込みサポートがあります。

CSS Modulesは、一意のクラス名を自動的に作成することで、CSSをローカルスコープにします。これにより、異なるファイルで同じクラス名を使用しても、衝突を心配する必要がありません。この動作により、CSS ModulesはコンポーネントレベルのCSSを含めるための理想的な方法になります。

### 例

CSS Modulesは、\`app\`ディレクトリ内の任意のファイルにインポートできます：

\`\`\`tsx title="app/blog/page.tsx"
import styles from './blog.module.css'

export default function Page() {
  return <main className={styles.blog}>My Blog</main>
}
\`\`\`

\`\`\`css title="app/blog/blog.module.css"
.blog {
  padding: 24px;
}
\`\`\`

CSS Modulesは**オプション機能**であり、**\`.module.css\`拡張子を持つファイルに対してのみ有効**です。通常の\`<link>\`スタイルシートとグローバルCSSは引き続きサポートされています。

本番環境では、すべてのCSS Moduleファイルは自動的に**多数の最小化およびコード分割された**\`.css\`ファイルに連結されます。これらの\`.css\`ファイルは、アプリケーションのホットな実行パスを表し、アプリケーションが描画するために必要な最小限のCSSがロードされることを保証します。

## Global CSS

グローバルCSSは、\`app\`ディレクトリ内の任意のレイアウト、ページ、またはコンポーネントにインポートできます。

> **知っておくと良いこと**: これは、グローバルCSSをインポートできるのが\`pages/_app.js\`ファイル内のみだった\`pages\`ディレクトリとは異なります。

たとえば、\`app/global.css\`という名前のスタイルシートを考えてみましょう：

\`\`\`css title="app/global.css"
body {
  padding: 20px 20px 60px;
  max-width: 680px;
  margin: 0 auto;
}
\`\`\`

ルートレイアウト（\`app/layout.js\`）内で、\`global.css\`スタイルシートをインポートして、アプリケーション内のすべてのルートにスタイルを適用します：

\`\`\`tsx title="app/layout.tsx"
// これらのスタイルはアプリケーション内のすべてのルートに適用されます
import './global.css'

export default function RootLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return (
    <html lang="en">
      <body>{children}</body>
    </html>
  )
}
\`\`\`

## 外部スタイルシート

外部パッケージによって公開されたスタイルシートは、\`app\`ディレクトリ内の任意の場所（配置されたコンポーネントを含む）でインポートできます：

\`\`\`tsx title="app/layout.tsx"
import 'bootstrap/dist/css/bootstrap.css'

export default function RootLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return (
    <html lang="en">
      <body className="container">{children}</body>
    </html>
  )
}
\`\`\`

> **知っておくと良いこと**: 外部スタイルシートは、npmパッケージから直接インポートするか、ダウンロードしてコードベースと一緒に配置する必要があります。\`<link rel="stylesheet" />\`は使用できません。

## スタイルの順序と結合

Next.jsは、本番ビルド中にCSSを自動的にチャンク（結合）して、スタイルシートの数を削減します。CSS順序は、アプリケーションコードにスタイルシートをインポートする順序によって決定されます。

たとえば、\`<BaseButton>\`が最初にインポートされるため、\`base-button.module.css\`は\`<Page>\`の前に順序付けられます：

\`\`\`tsx title="app/page.tsx"
import BaseButton from './base-button'
import styles from './page.module.css'

export default function Page() {
  return (
    <main className={styles.main}>
      <BaseButton />
    </main>
  )
}
\`\`\`

CSSの順序を予測可能に保つために、次のことをお勧めします：

- CSSファイルを単一のJS/TSファイルにのみインポートします。
- グローバルクラス名を使用する場合は、同じファイルで適用したい順序でグローバルスタイルをインポートします。
- グローバルスタイルよりもCSS Modulesを優先します。
- CSS Modulesには一貫した命名規則を使用します。たとえば、\`<name>.tsx\`よりも\`<name>.module.css\`を使用します。
- 共有スタイルを別のコンポーネントに抽出します。
- [Tailwind](/docs/app/building-your-application/styling/tailwind-css)を使用している場合は、ファイルの最上部（理想的には[ルートレイアウト](/docs/app/building-your-application/routing/layouts-and-pages#root-layout-required)）でスタイルシートをインポートします。
- 自動インポートをオフにします（VS Code設定で）。

> **知っておくと良いこと**:
>
> CSS順序は開発モードでは異なる動作をする可能性があり、最終的なビルド出力を確認するために常に本番ビルド（\`next build\`）を確認してください。

## 追加機能

Next.jsには、スタイルを追加する作成体験を向上させるための追加機能が含まれています：

- \`next dev\`でローカルに実行する場合、ローカルスタイルシート（グローバルまたはCSS Modules）は、[Fast Refresh](/docs/architecture/fast-refresh)を利用して、編集が保存されると即座に変更が反映されます。
- \`next build\`で本番用にビルドする場合、CSSファイルはより少ない数の最小化された\`.css\`ファイルにバンドルされ、スタイルを取得するために必要なネットワークリクエストの数が削減されます。
- JavaScriptを無効にした場合でも、本番ビルド（\`next start\`）でスタイルがロードされます。ただし、[Fast Refresh](/docs/architecture/fast-refresh)を有効にするには、\`next dev\`にJavaScriptが引き続き必要です。

## 次のステップ

これで、Next.jsでアプリケーションをスタイリングする方法を理解できました。次のステップでは、さらに高度なスタイリングトピックについて学びます：

- **[Sass](/docs/app/building-your-application/styling/sass)**: Next.jsでSassを使用する方法を学びます。
- **[CSS-in-JS](/docs/app/building-your-application/styling/css-in-js)**: Next.jsでCSS-in-JSライブラリを使用する方法を学びます。
- **[Fonts](/docs/app/building-your-application/optimizing/fonts)**: Next.jsでフォントを最適化する方法を学びます。
